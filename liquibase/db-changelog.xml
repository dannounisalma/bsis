<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<!-- NEVER DELETE OR MODIFY EXISTING CHANGE SETS - instead add change sets 
		reversing the previous ones if you need to change or delete -->
	<!-- ALWAYS USE A UNIQUE IDENTIFIER of format id="yyyy-mm-dd-<n>" eg: id="2010-12-07-1" -->
	<!-- ALWAYS UPDATE YOUR LOCAL COPY FROM SVN AND THEN VERIFY YOUR id BASED 
		ON THAT LATEST VERSION -->

	<!-- NEVER EVER FORMAT THIS FILE -->
	<!-- ALWAYS FORMAT YOUR ID IN YYYY-MM-DD-XX -->
	<!-- NEVER ENTER SINGLE DIGIT MONTH / YEAR / COUNTER. ALWAYS USE 2 DIGITS 
		SO THAT ORDER BY THIS ID IS ALWAYS PROPER -->
	<!-- "2012-05-05-01" < "2012-1-1-1" - WHICH IS DB WISE CORRECT, BUT INVALID 
		AS SUCH, BUT "2012-05-05-01" > "2012-01-01-01" WHICH IS VALID FOR BOTH DB 
		AS WELL AS CHRONOLOGICALLY -->

	<changeSet author="devang" id="2013-10-18-01">
		<sql>
			CREATE TABLE TEMPTABLE ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
			`username` VARCHAR(50) NOT NULL,
			PRIMARY KEY (`id`)
			)
		</sql>
	</changeSet>
	<changeSet id="2013-10-19-01" author="devang">
		<dropTable tableName="TEMPTABLE" />
	</changeSet>
	
	<!-- For issue 44 [Define Component Processing Rules] -->
	<changeSet id="201310261300" author="devang">
		<createTable tableName="componentprocessing">
		<column name="id" type="bigint(20)" autoIncrement="true">
			<constraints primaryKey="true" nullable="false" />
		</column>
		<column name="productProcessed" type="smallint(6)"></column>
		<column name="productSource" type="smallint(6)"></column>
		<column name="unitsMin" type="int(11)"></column>
		<column name="unitsMax" type="int(11)"></column>
		<column name="isDeleted" type="tinyint(1)"></column>
		</createTable>
	</changeSet>
	<changeSet id="201310261310" author="devang">
		<createTable tableName="componentprocessing_aud">
			<column name="id" type="bigint(20)" autoIncrement="true">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="REV" type="int(11)"></column>
			<column name="REVTYPE" type="tinyint(4)" defaultValue="NULL"></column>
			<column name="productProcessed" type="smallint(6)"></column>
			<column name="productSource" type="smallint(6)"></column>
			<column name="unitsMin" type="int(11)"></column>
			<column name="unitsMax" type="int(11)"></column>
			<column name="isDeleted" type="tinyint(1)"></column>
		</createTable>
	</changeSet>

	<changeSet id="201310261315" author="devang">
		<addForeignKeyConstraint constraintName="fk_productProcessed"
			baseTableName="componentprocessing" baseColumnNames="productProcessed"
			referencedTableName="producttype" referencedColumnNames="id"
			 />
		<addForeignKeyConstraint constraintName="fk_productSource"
			baseTableName="componentprocessing" baseColumnNames="productSource"
			referencedTableName="producttype" referencedColumnNames="id"
			 />
	</changeSet>
	<changeSet id="201310261320" author="devang">
		<addForeignKeyConstraint constraintName="fk_revinfo"
			baseTableName="componentprocessing_aud" baseColumnNames="REV" 
			referencedTableName="revinfo" referencedColumnNames="REV"
			/>
		<addForeignKeyConstraint constraintName="fk_productProcessed_aud"
			baseTableName="componentprocessing_aud" baseColumnNames="productProcessed"
			referencedTableName="producttype" referencedColumnNames="id"
			 />
		<addForeignKeyConstraint constraintName="fk_productSource_aud"
			baseTableName="componentprocessing_aud" baseColumnNames="productSource"
			referencedTableName="producttype" referencedColumnNames="id"
			 />
	</changeSet>			
</databaseChangeLog>	