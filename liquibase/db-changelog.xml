<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

	<!-- NEVER DELETE OR MODIFY EXISTING CHANGE SETS - instead add change sets 
		reversing the previous ones if you need to change or delete -->
	<!-- ALWAYS USE A UNIQUE IDENTIFIER of format id="yyyy-mm-dd-<n>" eg: id="2010-12-07-1" -->
	<!-- ALWAYS UPDATE YOUR LOCAL COPY FROM SVN AND THEN VERIFY YOUR id BASED 
		ON THAT LATEST VERSION -->

	<!-- NEVER EVER FORMAT THIS FILE -->
	<!-- ALWAYS FORMAT YOUR ID IN YYYY-MM-DD-XX -->
	<!-- NEVER ENTER SINGLE DIGIT MONTH / YEAR / COUNTER. ALWAYS USE 2 DIGITS 
		SO THAT ORDER BY THIS ID IS ALWAYS PROPER -->
	<!-- "2012-05-05-01" < "2012-1-1-1" - WHICH IS DB WISE CORRECT, BUT INVALID 
		AS SUCH, BUT "2012-05-05-01" > "2012-01-01-01" WHICH IS VALID FOR BOTH DB 
		AS WELL AS CHRONOLOGICALLY -->

	<changeSet author="devang" id="2013-10-18-01">
		<sql>
			CREATE TABLE TEMPTABLE ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
			`username` VARCHAR(50) NOT NULL,
			PRIMARY KEY (`id`)
			)
		</sql>
	</changeSet>
	<changeSet id="2013-10-19-01" author="devang">
		<dropTable tableName="TEMPTABLE" />
	</changeSet>

	<!-- For issue 57 [Add WHO Product Discard Reasons] -->
	<changeSet id="201310241507" author="nikita">
		<delete tableName="ProductStatusChangeReason">
			<where>category='DISCARDED'</where>
		</delete>
	</changeSet>
	<changeSet id="201310241508" author="nikita">
		<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Incomplete Donation"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
    	<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Processing Problems"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
    	<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Passed Expiry Dates"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
    	<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Reactive FOR TTIs"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
    	<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Storage Problems"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
    	<insert tableName="ProductStatusChangeReason">
            <column name="statusChangeReason" value="Transport Problems"/>
            <column name="category" value="DISCARDED"/>
            <column name="isDeleted" value="0"/>
    	</insert>
	</changeSet>

	<!-- For issue 62 [Allow for entry of donor haemoglobin count] -->
	<changeSet id="201310242025" author="devang">
		<insert tableName="FormField">
			<column name="form" value="CollectedSample"></column>
			<column name="FIELD" value="haemoglobinCount"></column>
			<column name="defaultDisplayName" value="Haemoglobin Count"></column>
			<column name="defaultValue" value=""></column>
			<column name="maxLength" value="0"></column>
			<column name="hidden" value="0"></column>
			<column name="isHidable" value="1"></column>
			<column name="isRequired" value="0"></column>
			<column name="canBeOptional" value="1"></column>
			<column name="autoGenerate" value="0"></column>
			<column name="isAutoGeneratable" value="0"></column>
			<column name="useCurrentTime" value="0"></column>
			<column name="isTimeField" value="0"></column>			
		</insert>
		<update tableName="CollectedSample">
			<column name="haemoglobinCount" type="DECIMAL(7,1)" defaultValue="NULL"></column>
		</update>
		<update tableName="CollectedSample_AUD">
			<column name="haemoglobinCount" type="DECIMAL(7,1)" defaultValue="NULL"></column>
		</update>
	</changeSet>

	<!-- For issue 69 [Allow for entry of donor weight] -->
	<changeSet id="201310241815" author="devang">
		<insert tableName="FormField">
			<column name="form" value="CollectedSample"></column>
			<column name="FIELD" value="donorWeight"></column>
			<column name="defaultDisplayName" value="Donor Weight"></column>
			<column name="defaultValue" value=""></column>
			<column name="maxLength" value="0"></column>
			<column name="hidden" value="0"></column>
			<column name="isHidable" value="1"></column>
			<column name="isRequired" value="0"></column>
			<column name="canBeOptional" value="1"></column>
			<column name="autoGenerate" value="0"></column>
			<column name="isAutoGeneratable" value="0"></column>
			<column name="useCurrentTime" value="0"></column>
			<column name="isTimeField" value="0"></column>			
		</insert>
		<update tableName="CollectedSample">
			<column name="donorWeight" type="DECIMAL(7,1)" defaultValue="NULL"></column>
		</update>
		<update tableName="CollectedSample_AUD">
			<column name="donorWeight" type="DECIMAL(7,1)" defaultValue="NULL"></column>
		</update>
	</changeSet>
	
	<!-- For issue 61 [Add donor blood pressure (systolic & diastolic)] -->
    <changeSet id="201310242001" author="devang">
        <insert tableName="FormField">
            <column name="form" value="CollectedSample"></column>
            <column name="FIELD" value="bloodPressureSystolic"></column>
            <column name="defaultDisplayName" value="Blood Pressure Systolic"></column>
            <column name="defaultValue" value=""></column>
            <column name="maxLength" value="0"></column>
            <column name="hidden" value="0"></column>
            <column name="isHidable" value="1"></column>
            <column name="isRequired" value="0"></column>
            <column name="canBeOptional" value="1"></column>
            <column name="autoGenerate" value="0"></column>
            <column name="isAutoGeneratable" value="0"></column>
            <column name="useCurrentTime" value="0"></column>
            <column name="isTimeField" value="0"></column>                        
        </insert>
        <insert tableName="FormField">
            <column name="form" value="CollectedSample"></column>
            <column name="FIELD" value="bloodPressureDiastolic"></column>
            <column name="defaultDisplayName" value="Blood Pressure Diastolic"></column>
            <column name="defaultValue" value=""></column>
            <column name="maxLength" value="0"></column>
            <column name="hidden" value="0"></column>
            <column name="isHidable" value="1"></column>
            <column name="isRequired" value="0"></column>
            <column name="canBeOptional" value="1"></column>
            <column name="autoGenerate" value="0"></column>
            <column name="isAutoGeneratable" value="0"></column>
            <column name="useCurrentTime" value="0"></column>
            <column name="isTimeField" value="0"></column>                        
        </insert>                        
        <update tableName="CollectedSample">
            <column name="bloodPressure" type="int" defaultValue="NULL"></column>
        </update>
        <renameColumn tableName="CollectedSample" oldColumnName="bloodPressure" newColumnName="bloodPressureSystolic" columnDataType="int"/>
        <update tableName="CollectedSample_AUD">
            <column name="bloodPressure" type="int" defaultValue="NULL"></column>
        </update>
        <renameColumn tableName="CollectedSample_AUD" oldColumnName="bloodPressure" newColumnName="bloodPressureSystolic" columnDataType="int"/>
        <addColumn tableName="CollectedSample">
            <column name="bloodPressureDiastolic" type="int" defaultValue="NULL"></column>
        </addColumn>
        <addColumn tableName="CollectedSample_AUD">
            <column name="bloodPressureDiastolic" type="int" defaultValue="NULL"></column>
        </addColumn>                        
    </changeSet>
	
	<!-- For issue 70 [Allow for entry of donor pulse] -->
	<changeSet id="201310241926" author="devang">
		<insert tableName="FormField">
			<column name="form" value="CollectedSample"></column>
			<column name="FIELD" value="donorPulse"></column>
			<column name="defaultDisplayName" value="Donor Pulse"></column>
			<column name="defaultValue" value=""></column>
			<column name="maxLength" value="0"></column>
			<column name="hidden" value="0"></column>
			<column name="isHidable" value="1"></column>
			<column name="isRequired" value="0"></column>
			<column name="canBeOptional" value="1"></column>
			<column name="autoGenerate" value="0"></column>
			<column name="isAutoGeneratable" value="0"></column>
			<column name="useCurrentTime" value="0"></column>
			<column name="isTimeField" value="0"></column>			
		</insert>
		<addColumn tableName="CollectedSample">
			<column name="donorPulse" type="int" defaultValue="NULL"></column>
		</addColumn>
		<addColumn tableName="CollectedSample_AUD">
			<column name="donorPulse" type="int" defaultValue="NULL"></column>
		</addColumn>		
	</changeSet>
    
    <!-- For issue 27 [Add 'Record Product' tab to Component Processing] -->
    <changeSet id="201311071844" author="Ankur">
		<addColumn tableName="Product">
			<column name="donationIdentificationNumber" type="VARCHAR(30)" defaultValue=""></column>
		</addColumn>
		<addColumn tableName="Product_AUD">
			<column name="donationIdentificationNumber" type="VARCHAR(30)" defaultValue=""></column>
		</addColumn>
		<insert tableName="FormField">
			<column name="form" value="Product"></column>
			<column name="FIELD" value="donationIdentificationNumber"></column>
			<column name="defaultDisplayName" value="Donation Identification Number"></column>
			<column name="defaultValue" value=""></column>
			<column name="maxLength" value="0"></column>
			<column name="hidden" value="0"></column>
			<column name="isHidable" value="1"></column>
			<column name="isRequired" value="0"></column>
			<column name="canBeOptional" value="1"></column>
			<column name="autoGenerate" value="0"></column>
			<column name="isAutoGeneratable" value="0"></column>
			<column name="useCurrentTime" value="0"></column>
			<column name="isTimeField" value="0"></column>			
		</insert>	
		<insert tableName="FormField">
			<column name="form" value="Product"></column>
			<column name="FIELD" value="numUnits"></column>
			<column name="defaultDisplayName" value="Num. Units"></column>
			<column name="defaultValue" value=""></column>
			<column name="maxLength" value="0"></column>
			<column name="hidden" value="0"></column>
			<column name="isHidable" value="1"></column>
			<column name="isRequired" value="0"></column>
			<column name="canBeOptional" value="1"></column>
			<column name="autoGenerate" value="0"></column>
			<column name="isAutoGeneratable" value="0"></column>
			<column name="useCurrentTime" value="0"></column>
			<column name="isTimeField" value="0"></column>			
		</insert>		
	</changeSet>

	<!-- For issue 34 [Add admin interface to manage & configure product type components and rules] -->
    <changeSet id="201310261238" author="ankur">
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="productTypes"></column>
                    <column name="defaultDisplayName" value="Product types"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="newProductType"></column>
                    <column name="defaultDisplayName" value="New product type"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="productCode"></column>
                    <column name="defaultDisplayName" value="Product Code"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="productType"></column>
                    <column name="defaultDisplayName" value="Product Type"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="expiryTime"></column>
                    <column name="defaultDisplayName" value="Expiry Time"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="status"></column>
                    <column name="defaultDisplayName" value="Status"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="productTypeName"></column>
                    <column name="defaultDisplayName" value="Product Type Name"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="productCodeName"></column>
                    <column name="defaultDisplayName" value="Product Code Name"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="expiryInterval"></column>
                    <column name="defaultDisplayName" value="Expiry Time"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="days"></column>
                    <column name="defaultDisplayName" value="DAYS"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="hours"></column>
                    <column name="defaultDisplayName" value="HOURS"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="years"></column>
                    <column name="defaultDisplayName" value="YEARS"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <insert tableName="FormField">
                    <column name="form" value="ConfigureProductTypes"></column>
                    <column name="FIELD" value="bledProduct"></column>
                    <column name="defaultDisplayName" value="Bled Product"></column>
                    <column name="defaultValue" value=""></column>
                    <column name="maxLength" value="0"></column>
                    <column name="hidden" value="0"></column>
                    <column name="isHidable" value="1"></column>
                    <column name="isRequired" value="0"></column>
                    <column name="canBeOptional" value="1"></column>
                    <column name="autoGenerate" value="0"></column>
                    <column name="isAutoGeneratable" value="0"></column>
                    <column name="useCurrentTime" value="0"></column>
                    <column name="isTimeField" value="0"></column>                        
            </insert>
            <renameColumn tableName="producttype" oldColumnName="productTypeNameShort" newColumnName="productTypeCode" columnDataType="varchar(30)"/>
            <renameColumn tableName="producttype_aud" oldColumnName="productTypeNameShort" newColumnName="productTypeCode" columnDataType="varchar(30)"/>
            <addColumn tableName="producttype">
                    <column name="bledProduct" type="tinyint(1)" defaultValue="0"></column>
            </addColumn>
            <addColumn tableName="producttype_aud">
                    <column name="bledProduct" type="tinyint(1)" defaultValue="0"></column>
            </addColumn>
    </changeSet>

</databaseChangeLog>	